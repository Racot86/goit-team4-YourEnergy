<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Task Management System</title>
    <link rel="stylesheet" href="./css/styles.css">
    <link rel="stylesheet" href="./css/task-manager.css">
</head>
<body>
    <load src="./partials/header.html" icon-path="./img/sprite.svg#logo" />

    <div class="container">
        <div class="task-grid">
            <!-- Заголовки -->
            <div class="header-cell"></div>
            <div class="header-cell">Who Take</div>
            <div class="header-cell">In Progress</div>
            <div class="header-cell">To Verify</div>
            <div class="header-cell">Done</div>

            <!-- Top-priority строка -->
            <div class="priority-cell">Top-priority</div>
            <div class="drop-zone" data-priority="top-priority" data-status="who-take"></div>
            <div class="drop-zone" data-priority="top-priority" data-status="in-progress"></div>
            <div class="drop-zone" data-priority="top-priority" data-status="to-verify"></div>
            <div class="drop-zone" data-priority="top-priority" data-status="done"></div>

            <!-- Important строка -->
            <div class="priority-cell">Important</div>
            <div class="drop-zone" data-priority="important" data-status="who-take"></div>
            <div class="drop-zone" data-priority="important" data-status="in-progress"></div>
            <div class="drop-zone" data-priority="important" data-status="to-verify"></div>
            <div class="drop-zone" data-priority="important" data-status="done"></div>

            <!-- To Fix строка -->
            <div class="priority-cell">To Fix</div>
            <div class="drop-zone" data-priority="to-fix" data-status="who-take"></div>
            <div class="drop-zone" data-priority="to-fix" data-status="in-progress"></div>
            <div class="drop-zone" data-priority="to-fix" data-status="to-verify"></div>
            <div class="drop-zone" data-priority="to-fix" data-status="done"></div>

            <!-- Normal строка -->
            <div class="priority-cell">Normal</div>
            <div class="drop-zone" data-priority="normal" data-status="who-take"></div>
            <div class="drop-zone" data-priority="normal" data-status="in-progress"></div>
            <div class="drop-zone" data-priority="normal" data-status="to-verify"></div>
            <div class="drop-zone" data-priority="normal" data-status="done"></div>
        </div>

        <!-- Добавляем кнопку переключения темы рядом с кнопкой добавления -->
        <div class="floating-buttons">
            <button id="addTaskBtn" class="add-task-btn">+</button>
            <button id="themeToggleBtn" class="theme-toggle-btn">
                <svg class="moon-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                </svg>
                <svg class="sun-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="5"></circle>
                    <line x1="12" y1="1" x2="12" y2="3"></line>
                    <line x1="12" y1="21" x2="12" y2="23"></line>
                    <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                    <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                    <line x1="1" y1="12" x2="3" y2="12"></line>
                    <line x1="21" y1="12" x2="23" y2="12"></line>
                    <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                    <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                </svg>
            </button>
        </div>
    </div>

    <!-- Модальные окна -->
    <div id="taskModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Задача</h2>
                <div class="modal-controls">
                    <button type="button" class="delete-task-btn" style="display: none;">Удалить</button>
                    <span class="close">&times;</span>
                </div>
            </div>
            <form id="taskForm">
                <input type="text" id="taskTitle" placeholder="Заголовок задачи" required>
                <div class="task-number-container">
                    <input type="text" id="taskNumber" placeholder="Номер задачи (необязательно)" pattern="[0-9]*">
                    <div id="taskNumberSuggestions" class="suggestions-container"></div>
                </div>
                <textarea id="taskDescription" placeholder="Описание задачи" required></textarea>
                <select id="taskCategory" required>
                    <option value="Must_Have" selected>Must Have</option>
                    <option value="Upgrade">Upgrade</option>
                    <option value="Specific">Specific</option>
                </select>
                <select id="taskPriority" required>
                    <option value="top-priority">Top-priority</option>
                    <option value="important">Important</option>
                    <option value="to-fix">To Fix</option>
                    <option value="normal">Normal</option>
                </select>
                <select id="taskStatus" required>
                    <option value="who-take">Who Take</option>
                    <option value="in-progress">In Progress</option>
                    <option value="to-verify">To Verify</option>
                    <option value="done">Done</option>
                </select>
                <div class="assignees-container">
                    <div class="assignee-header">
                        <label>Исполнители</label>
                        <button type="button" id="addAssigneeBtn" class="add-assignee-btn">+</button>
                    </div>
                    <div id="assigneesList">
                        <div class="assignee-item">
                            <select class="taskAssignee" required>
                                <option value="empty">Empty</option>
                                <option value="Andrii Sushylnikov">Andrii Sushylnikov</option>
                                <option value="Daria Honcharuk">Daria Honcharuk</option>
                                <option value="Dmytro Mayevsky">Dmytro Mayevsky</option>
                                <option value="Maks Ki">Maks Ki</option>
                                <option value="Mariia Sv.">Mariia Sv.</option>
                                <option value="Roman Turas">Roman Turas</option>
                                <option value="Viktoriia Didenko">Viktoriia Didenko</option>
                                <option value="Hryhorii Chernysh">Hryhorii Chernysh (Mentor)</option>
                                <option value="Daria">Daria (client manager)</option>
                                <option value="Lesya Katanova">Lesya Katanova</option>
                                <option value="Olena Deineha">Olena Deineha</option>
                            </select>
                            <button type="button" class="remove-assignee-btn">×</button>
                        </div>
                    </div>
                </div>
                <div class="subtasks-container">
                    <div class="subtasks-header">
                        <label>Подзадачи</label>
                        <button type="button" id="addSubtaskBtn" class="add-subtask-btn">+</button>
                    </div>
                    <div id="subtasksList">
                        <!-- Здесь будут подзадачи -->
                    </div>
                </div>
                <button type="submit">Сохранить</button>
            </form>
        </div>
    </div>

    <div id="deleteConfirmModal" class="modal">
        <div class="modal-content delete-confirm">
            <h2>Подтверждение удаления</h2>
            <p>Вы уверены, что хотите удалить эту задачу?</p>
            <div class="confirm-buttons">
                <button id="confirmDelete" class="danger-btn">Удалить</button>
                <button id="cancelDelete" class="cancel-btn">Отмена</button>
            </div>
        </div>
    </div>

    <load src="./partials/footer.html" />

    <script type="module" src="./js/task-manager.js"></script>
</body>
</html> 